document.addEventListener("DOMContentLoaded",function(t){var e,n="inline-block",o="flex",a=null,l=25e5,s=94e6,r=3e6,d=document.getElementsByClassName("bk-btn"),c="",m=document.getElementById("bk-modal"),p="",u="https://pc.baokim.vn/",g="https://pg.baokim.vn/",b="https://ws.baokim.vn/payment-services",y=window.location.hostname;"m."==(y=y.replace("www.","")).substring(0,2)&&(y=y.substring(2));var v=window.location.protocol;function k(){var t=document.getElementsByClassName("bk-product-name"),n=document.getElementsByClassName("bk-product-price"),o=document.getElementsByClassName("bk-product-qty"),l=document.getElementsByClassName("bk-product-image"),s=document.getElementsByClassName("bk-product-property"),r=[],d=[],c=[],m=[],p="";for(maxLoop=t.length,i=0;i<maxLoop;i++){r.push(t[i].innerHTML);var u=R(n[i].innerHTML);d.push(u);var g=null;l[i].hasAttribute("data-src")?g=l[i].getAttribute("data-src"):l[i].hasAttribute("src")&&(g=l[i].getAttribute("src")),g&&!1===g.includes("//")&&(g=v+"//"+y+"/"+g),m.push(g),void 0!==o[i]&&o[i].value?c.push(o[i].value):c.push(1)}var k=null,h=null,f=s.length;if(f>0){for(i=0;i<f;i++){var _=s[i];k=_.value,"input"==_.tagName.toLowerCase()?p+=_.value+" - ":"select"==_.tagName.toLowerCase()&&(p+=_.options[_.selectedIndex].text+" - ")}p=p.substring(0,p.length-2)}var E=[];for(i=0;i<maxLoop;i++){"undefined"!=typeof meta&&void 0!==meta.product&&(h=meta.product.id);var x={name:r[i],image:m[i],quantity:c[i],price:d[i],platform_product_id:h,platform_variant_id:k};E.push(x)}var L={products:E,domain:y,merchantLogo:e.logo,productProperty:p};console.log(L);var N=P("POST",b+"api/v1/order-temporary/store",JSON.stringify(L));N&&(a=N.token)}console.log(y),function(){var t=P("GET",u+"api/plus/get-merchant?domain="+y,null);if(!t)return;if(200!=t.code)return;var a=t.meta;if(!a)return;if(null==(e=a.data))return h.style.display="none",f.style.display="none",_.style.display="none",E.style.display="none",L.style.display="none",void(N.style.display="none");var i=e.config,g=i.payment,b=i.installment,v=i.installment_amigo;m&&(p+='<div id="bk-modal-payment" class="bk-modal">',p+='<div class="bk-modal-content" id="bk-modal-content-style">',p+='<div id="bk-modal-pop" class="bk-modal-header">',p+='<div class="bk-container-fluid">',p+='<div class="bk-row bk-popup-header">',p+='<div class="bk-col-3" id="bk-logo">',p+="</div>",p+='<div class="bk-col-6">',p+="</div>",p+='<div class="bk-col-2 bk-text-right">',p+='<button type="button" id="bk-modal-close">&times;</button>',p+="</div>",p+="</div>",p+="</div>",p+="</div>",p+='<div class="bk-modal-body">',p+='<iframe width="100%" height="100%" id="iframe" src=""></iframe>',p+="</div>",p+="</div>",p+="</div>",p+='<div id="bk-modal-notify" class="bk-modal">',p+='<div class="bk-modal-content" id="bk-modal-content-notify">',p+='<div class="bk-modal-header">',p+='<div class="bk-container-fluid">',p+='<div class="bk-row bk-popup-header">',p+='<div class="bk-col-3" id="bk-logo">',p+="</div>",p+='<div class="bk-col-6">',p+="</div>",p+='<div class="bk-col-3 bk-text-right">',p+='<button type="button" id="bk-modal-close">&times;</button>',p+="</div>",p+="</div>",p+="</div>",p+="</div>",p+='<div class="bk-modal-body">',p+='<p class="text-center">Sản phẩm đã hết hàng, không thể thanh toán</p>',p+='<button type="button" class="bk-modal-notify-close bk-btn-notify-close">Đóng</button>',p+="</div>",p+="</div>",p+="</div>",m.innerHTML=p);if(g.enable){var k=document.getElementsByClassName("bk-product-price"),B=!0,w=k.length;for(H=0;H<w;H++){var C=k[H].innerHTML;if("LIÊN HỆ"===C.toUpperCase()||"ĐẶT HÀNG"===C.toUpperCase())return void(B=!1);if(void 0===(C=R(k[H].innerHTML))||0==C)return void(B=!1)}if(B){var T="Giao tận nơi hoặc nhận tại cửa hàng",M="#e00",A="#fff";if(null!=t.meta.data.style_popup){const e=t.meta.data.style_popup;for(var H=0;H<e.length;H++)1==e[H].type&&1==e[H].status&&(null!=e[H].note_btn_integrated&&(console.log(e[H].note_btn_integrated),T=e[H].note_btn_integrated),null!=e[H].bg_color_btn_payment&&(console.log(e[H].bg_color_btn_payment),M=e[H].bg_color_btn_payment),null!=e[H].tx_color_btn_payment&&(console.log(e[H].tx_color_btn_payment),A=e[H].tx_color_btn_payment))}c+='<button class="bk-btn-paynow" style="display: '+n+";background-color: "+M+" !important;color: "+A+' !important" type="button">',c+="<strong>Mua ngay</strong>",c+="<span>"+T+"</span>",c+="</button>"}}if(b.enable){var I=0,k=document.getElementsByClassName("bk-product-price"),O=document.getElementsByClassName("bk-product-name"),w=k.length;for(H=0;H<w;H++){var C=R(k[H].innerHTML);O.length>1?I+=C:I=C}var S=!1;"donghoduyanh.com"==y&&(r=5e6),I>=r&&(S=!0),"demo-bkplus.baokim.vn"!=y&&"devtest.baokim.vn:9405"!=y&&"devtest.baokim.vn"!=y&&"bkplus.myharavan.com"!=y||(S=!0,console.log(3));var q="Visa, Master, JCB",G="#288ad6",U="#fff";if(null!=t.meta.data.style_popup){const e=t.meta.data.style_popup;for(var H=0;H<e.length;H++)2==e[H].type&&1==e[H].status&&(null!=e[H].note_btn_integrated&&(console.log(e[H].note_btn_integrated),q=e[H].note_btn_integrated),null!=e[H].bg_color_btn_installment&&(console.log(e[H].bg_color_btn_installment),G=e[H].bg_color_btn_installment),null!=e[H].tx_color_btn_installment&&(console.log(e[H].tx_color_btn_installment),U=e[H].tx_color_btn_installment))}S&&(c+='<button class="bk-btn-installment" style="display: '+n+";background-color: "+G+" !important;color: "+U+' !important" type="button">',c+="<strong>Trả góp qua thẻ</strong>",c+="<span>"+q+"</span>",c+="</button>")}if(v.enable){var I=0,k=document.getElementsByClassName("bk-product-price"),O=document.getElementsByClassName("bk-product-name"),w=k.length;for(H=0;H<w;H++){var C=R(k[H].innerHTML);O.length>1?I+=C:I=C}var J=!1;if(I>=l&&I<=s&&(J=!0),"demo-bkplus.baokim.vn"!=y&&"devtest.baokim.vn:9405"!=y&&"devtest.baokim.vn"!=y&&"bkplus.myharavan.com"!=y||(J=!0),J){'<img src="https://static.baokim.vn/storage/files/shares/button%20insta.png">',"</div>",'<div class="bk-insta-content">',"<strong>MUA NGAY - TRẢ SAU</strong>","<span>không cần thẻ</span>","</div>",c+='<button class="bk-btn-installment-amigo" style="display: '+o+'" type="button">',c+='<div class="bk-insta-logo"><img src="https://static.baokim.vn/storage/files/shares/button%20insta.png"></div><div class="bk-insta-content"><strong>MUA NGAY - TRẢ SAU</strong><span>không cần thẻ</span></div>',c+="</button>"}}for(x in d)d[x].innerHTML=c}();var h=document.getElementById("bk-btn-paynow"),f=document.getElementsByClassName("bk-btn-paynow"),_=document.getElementById("bk-btn-installment"),E=document.getElementsByClassName("bk-btn-installment"),L=document.getElementById("bk-btn-installment-amigo"),N=document.getElementsByClassName("bk-btn-installment-amigo"),B=document.getElementsByClassName("bk-btn-paynow-list"),w=document.getElementsByClassName("bk-btn-installment-list"),C=document.getElementById("bk-modal-payment"),T=document.getElementById("bk-modal-notify"),M=document.getElementById("bk-modal-close"),A=document.getElementsByClassName("bk-modal-notify-close"),H=document.getElementById("iframe"),I=document.getElementById("bk-modal-pop"),O=document.getElementById("bk-modal-content-style");if(f.length>0)for(x=0;x<f.length;x++)f[x].addEventListener("click",function(){S(this)});if(E.length>0)for(x=0;x<E.length;x++)E[x].addEventListener("click",function(){S(this,"/installment")});if(N.length>0)for(x=0;x<N.length;x++)N[x].addEventListener("click",function(){S(this,"/insta/installment")});function S(t,e=""){var n=P("GET",u+"api/plus/get-merchant?domain="+y,null);if("bk-btn-paynow"==t.className){var o="#006d9c";if(null!=n.meta.data.style_popup){const t=n.meta.data.style_popup;for(var l=0;l<t.length;l++)1==t[l].type&&1==t[l].status&&(console.log(t[l].bg_color_mdl_payment),null!=t[l].bg_color_mdl_payment&&(o=t[l].bg_color_mdl_payment,I.style.backgroundColor=o),2==t[l].display_mode_popup&&(O.style.width="100%",O.style.margin="0px",O.style.height="100%"))}}if("bk-btn-installment"==t.className){var i="#006d9c";if(null!=n.meta.data.style_popup){const t=n.meta.data.style_popup;for(l=0;l<t.length;l++)2==t[l].type&&1==t[l].status&&(console.log(t[l].bg_color_mdl_installment),null!=t[l].bg_color_mdl_installment&&(i=t[l].bg_color_mdl_installment,I.style.backgroundColor=i),2==t[l].display_mode_popup&&(O.style.width="100%",O.style.margin="0px",O.style.height="100%"))}}if("bk-btn-installment-amigo"==t.className){var s="#006d9c";if(null!=n.meta.data.style_popup){const t=n.meta.data.style_popup;for(l=0;l<t.length;l++)3==t[l].type&&1==t[l].status&&(console.log(t[l].bg_color_mdl_insta),null!=t[l].bg_color_mdl_insta&&(s=t[l].bg_color_mdl_insta,I.style.backgroundColor=s),2==t[l].display_mode_popup&&(O.style.width="100%",O.style.margin="0px",O.style.height="100%"))}}var r=document.getElementsByClassName("bk-check-out-of-stock"),d=!1;if(r.length>0)for(l=0;l<r.length;l++)if("Hết hàng"===r[l].value)return d=!0,null;if(d)T.css({display:"block"}),T.removeClass("hide");else{var c=navigator.vendor&&navigator.vendor.indexOf("Apple")>-1&&navigator.userAgent&&-1==navigator.userAgent.indexOf("CriOS")&&-1==navigator.userAgent.indexOf("FxiOS");a||k();var m=U(e);0==c?H.setAttribute("src",m):window.location=m}}if(document.addEventListener("keydown",t=>{"Escape"===t.key&&(C.style.display="none",J())}),M&&M.addEventListener("click",function(){C.style.display="none",J()}),A.length>0&&A.addEventListener("click",function(){T.style.display="none",J()}),B.length>0)for(i=0;i<B.length;i++)B[i].addEventListener("click",function(){q(this)});if(w.length>0)for(i=0;i<w.length;i++)w[i].addEventListener("click",function(){q(this,"/installment")});function q(t,e=""){var n={},o=[],a=[],l=[];a.push(t.getAttribute("data-price")),l.push(t.getAttribute("data-image")),o.push(t.getAttribute("data-name")),n.productPrices=a,n.productNames=o,n.productImages=l,console.log(n),G(n);var i=U(e);H.setAttribute("src",i)}var G=function(t){C.style.display="block",C.classList.remove("hide");var n=["1"];maxLoopList=t.productNames.length;var o=[];for(i=0;i<maxLoopList;i++){var l={name:t.productNames[i],image:t.productImages[i],quantity:n[i],price:t.productPrices[i]};o.push(l)}var s={products:o,domain:y,merchantLogo:e.logo,productProperty:""},r=P("POST",b+"api/v1/order-temporary/store",JSON.stringify(s));r&&(a=r.token)};function P(t,e,n,o=!1){var a=new XMLHttpRequest;a.open(t,e,o);var l=null;try{a.setRequestHeader("Content-Type","application/json"),a.send(n),l=a.response,l=JSON.parse(l),console.log(l)}catch(t){console.log("Request failed"),console.log(t)}return l}function U(t=""){var e,n;return C.style.display="block",C.classList.remove("hide"),e=document.getElementsByTagName("body")[0],n=e.offsetWidth,e.style.overflow="hidden",e.style.width=n,g+t+"?token="+a}function J(){var t=document.getElementsByTagName("body")[0];t.style.overflow="auto",t.style.width="auto"}function R(t){return price=t.replace("VNĐ",""),price=t.split(".").join(""),price=price.split(",").join(""),price=price.split(" ").join(""),price=t.replace(/[^0-9]/g,""),price=parseInt(price,10),price}if("undefined"!=typeof meta&&console.log(meta),"xedienvietthanh.com"==window.location.hostname){for(i=0;i<f.length;i++)f[i].innerHTML="",f[i].innerHTML='<strong style="display: block">Mua ngay</strong><span style="display: block">(Mua online được giảm giá 500k)</span><span style="display: block; margin-bottom: 5px;">Giao hàng miễn phí</span>';for(i=0;i<E.length;i++)E[i].innerHTML="",E[i].innerHTML='<strong style="display: block">Mua trả góp 0%</strong><span style="display: block"> Thủ tục đơn giản</span><span style="display: block; margin-bottom: 5px;">Qua thẻ: Visa, Master, JCB</span>'}});
